<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Telegram Bot Cloud - 7/24 Aktif</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* √ñNCEKƒ∞ CSS KODUNUN TAMAMI BURAYA GELECEK */
        /* Yukarƒ±daki t√ºm CSS stilini buraya kopyala */
        :root {
            --primary: #3498db;
            --secondary: #2980b9;
            --accent: #e74c3c;
            --success: #2ecc71;
            --warning: #f39c12;
            --info: #1abc9c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --text: #34495e;
            --bg: #f8f9fa;
            --card: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }

        .header {
            background: var(--gradient);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 0 0 30px 30px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        /* ... T√úM Dƒ∞ƒûER CSS KODLARI ... */
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="logo">ü§ñ</div>
        <h1>Telegram Bot Cloud</h1>
        <p class="subtitle">üöÄ telegram botu √ßalƒ±≈ütƒ±rma| 7/24 Aktif | DearSiber vds</p>
        <div style="margin-top: 15px; font-size: 0.9rem; opacity: 0.8;">
            ‚ö° Backend: telegra.com| üåê Frontend: GitHub Pages
        </div>
    </header>

    <div class="container">
        <!-- LOGIN SECTION -->
        <section id="loginSection" class="login-section">
            <h2 style="margin-bottom: 25px;">üîê Sisteme Giri≈ü Yapƒ±n</h2>
            <div class="form-group">
                <label for="accessKey"><i class="fas fa-key"></i> Eri≈üim Anahtarƒ±nƒ±z</label>
                <input type="password" id="accessKey" placeholder="üîë Anahtarƒ±nƒ±zƒ± girin..." required>
            </div>
            <button class="btn btn-primary pulse" onclick="login()">
                <i class="fas fa-sign-in-alt"></i> Giri≈ü Yap
            </button>
            <div style="margin-top: 20px; padding: 15px; background: rgba(52, 152, 219, 0.1); border-radius: 10px;">
                <strong>üëë Admin Anahtarƒ±:</strong> <code>DJF27DJF</code><br>
                <strong>üë§ normal Kullanƒ±cƒ±:</strong> <code>USER123</code>
            </div>
        </section>

        <!-- DASHBOARD -->
        <section id="dashboard" class="dashboard">
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card floating">
                    <div class="stat-icon">ü§ñ</div>
                    <div class="stat-number" id="totalBots">0</div>
                    <div class="stat-text">Toplam Bot</div>
                </div>
                <div class="stat-card floating" style="animation-delay: 0.2s;">
                    <div class="stat-icon">üü¢</div>
                    <div class="stat-number" id="activeBots">0</div>
                    <div class="stat-text">Aktif Bot</div>
                </div>
                <div class="stat-card floating" style="animation-delay: 0.4s;">
                    <div class="stat-icon">üî¥</div>
                    <div class="stat-number" id="inactiveBots">0</div>
                    <div class="stat-text">Pasif Bot</div>
                </div>
                <div class="stat-card floating" style="animation-delay: 0.6s;">
                    <div class="stat-icon">‚è±Ô∏è</div>
                    <div class="stat-number" id="uptime">0s</div>
                    <div class="stat-text">√áalƒ±≈üma S√ºresi</div>
                </div>
            </div>

            <!-- Action Grid -->
            <div class="action-grid">
                <div class="action-card">
                    <h3 class="card-title"><i class="fas fa-plus-circle"></i> Yeni Bot Ekle</h3>
                    <div class="form-group">
                        <label for="botToken"><i class="fas fa-robot"></i> Bot Token</label>
                        <input type="text" id="botToken" placeholder="ü§ñ Bot Father tokeninizi girin...">
                    </div>
                    <div class="form-group">
                        <label for="botName"><i class="fas fa-signature"></i> Bot Adƒ±</label>
                        <input type="text" id="botName" placeholder="üí° Botunuz i√ßin bir isim...">
                    </div>
                    <button class="btn btn-success" onclick="addBot()">
                        <i class="fas fa-rocket"></i> Bot Ekle ve Ba≈ülat
                    </button>
                </div>

                <div class="action-card">
                    <h3 class="card-title"><i class="fas fa-bolt"></i> Hƒ±zlƒ± ƒ∞≈ülemler</h3>
                    <div style="display: grid; gap: 12px;">
                        <button class="btn btn-info" onclick="startAllBots()">
                            <i class="fas fa-play"></i> T√ºm√ºn√º Ba≈ülat
                        </button>
                        <button class="btn btn-warning" onclick="stopAllBots()">
                            <i class="fas fa-stop"></i> T√ºm√ºn√º Durdur
                        </button>
                        <button class="btn btn-primary" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i> Yenile
                        </button>
                    </div>
                </div>
            </div>

            <!-- Bot List -->
            <div class="bot-list" id="botListContainer">
                <h2 style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-list"></i> Bot Listesi
                </h2>
                <!-- Botlar buraya dinamik olarak eklenecek -->
            </div>

            <!-- Admin Panel -->
            <div id="adminPanel" class="admin-panel">
                <h2 class="card-title"><i class="fas fa-user-shield"></i> Admin Y√∂netim Paneli</h2>
                
                <div class="action-grid">
                    <div class="action-card">
                        <h3 class="card-title"><i class="fas fa-key"></i> Yeni Anahtar Olu≈ütur</h3>
                        <div class="form-group">
                            <label for="newKeyName">Anahtar ƒ∞smi</label>
                            <input type="text" id="newKeyName" placeholder="üè∑Ô∏è Anahtar i√ßin isim...">
                        </div>
                        <div class="form-group">
                            <label for="keyExpiryDays">Ge√ßerlilik S√ºresi (G√ºn)</label>
                            <select id="keyExpiryDays">
                                <option value="7">7 G√ºn</option>
                                <option value="30" selected>30 G√ºn</option>
                                <option value="90">90 G√ºn</option>
                                <option value="365">1 Yƒ±l</option>
                            </select>
                        </div>
                        <button class="btn btn-warning" onclick="generateKey()">
                            <i class="fas fa-key"></i> Anahtar Olu≈ütur
                        </button>
                    </div>
                </div>

                <div class="key-list" id="keyListContainer">
                    <h3 style="margin: 25px 0 15px 0; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-key"></i> Aktif Anahtarlar
                    </h3>
                </div>
            </div>
        </section>
    </div>

    <script>
        // BACKEND API URL - Render.com'da √ßalƒ±≈üacak
        const API_BASE_URL = 'https://vdsdearzaza-xyz.onrender.com'; // BUNA Dƒ∞KKAT!

        let currentUser = null;
        let bots = [];
        let systemUptime = 0;

        // Backend API √ßaƒürƒ±larƒ±
        async function apiCall(endpoint, method = 'GET', data = null) {
            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                };

                if (data) {
                    options.body = JSON.stringify(data);
                }

                const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
                return await response.json();
            } catch (error) {
                console.error('API Hatasƒ±:', error);
                showNotification('üåê Sunucu baƒülantƒ± hatasƒ±!', 'error');
                return { success: false, message: 'Baƒülantƒ± hatasƒ±' };
            }
        }

        // Giri≈ü fonksiyonu - GER√áEK
        async function login() {
            const key = document.getElementById('accessKey').value.trim();
            
            if (!key) {
                showNotification('‚ö†Ô∏è L√ºtfen anahtar girin!', 'warning');
                return;
            }

            const result = await apiCall('/api/login', 'POST', { api_key: key });
            
            if (result.success) {
                currentUser = {
                    id: result.user_id,
                    isAdmin: result.is_admin
                };
                
                showDashboard();
                showNotification('üéâ Giri≈ü ba≈üarƒ±lƒ±! Botlarƒ±nƒ±z y√ºkleniyor...', 'success');
                loadBots();
            } else {
                showNotification('‚ùå ' + result.message, 'error');
            }
        }

        // Bot ekleme - GER√áEK
        async function addBot() {
            const token = document.getElementById('botToken').value.trim();
            const name = document.getElementById('botName').value.trim();

            if (!token || !name) {
                showNotification('üìù L√ºtfen t√ºm alanlarƒ± doldurun!', 'error');
                return;
            }

            const result = await apiCall('/api/add_bot', 'POST', {
                bot_token: token,
                bot_name: name,
                user_id: currentUser.id
            });

            if (result.success) {
                showNotification('üöÄ ' + result.message, 'success');
                document.getElementById('botToken').value = '';
                document.getElementById('botName').value = '';
                loadBots();
            } else {
                showNotification('‚ùå ' + result.message, 'error');
            }
        }

        // Botlarƒ± y√ºkle - GER√áEK
        async function loadBots() {
            const result = await apiCall(`/api/get_bots?user_id=${currentUser.id}`);
            
            if (result.success) {
                bots = result.bots;
                updateBotList();
                updateStats();
            }
        }

        // Bot durdur - GER√áEK
        async function stopBot(botId) {
            const result = await apiCall('/api/stop_bot', 'POST', {
                bot_id: botId,
                user_id: currentUser.id
            });

            if (result.success) {
                showNotification('‚è∏Ô∏è ' + result.message, 'success');
                loadBots();
            }
        }

        // Bot ba≈ülat - GER√áEK
        async function startBot(botId) {
            const result = await apiCall('/api/start_bot', 'POST', {
                bot_id: botId,
                user_id: currentUser.id
            });

            if (result.success) {
                showNotification('üéØ ' + result.message, 'success');
                loadBots();
            } else {
                showNotification('‚ùå ' + result.message, 'error');
            }
        }

        // Bot sil - GER√áEK
        async function deleteBot(botId) {
            if (confirm('ü§î Bu botu silmek istediƒüinizden emin misiniz?')) {
                const result = await apiCall('/api/delete_bot', 'POST', {
                    bot_id: botId,
                    user_id: currentUser.id
                });

                if (result.success) {
                    showNotification('üóëÔ∏è ' + result.message, 'success');
                    loadBots();
                }
            }
        }

        // Anahtar olu≈ütur - GER√áEK
        async function generateKey() {
            const keyName = document.getElementById('newKeyName').value.trim();
            const expiryDays = parseInt(document.getElementById('keyExpiryDays').value);

            if (!keyName) {
                showNotification('üìù L√ºtfen anahtar ismi girin!', 'error');
                return;
            }

            const result = await apiCall('/api/generate_key', 'POST', {
                key_name: keyName,
                days: expiryDays,
                admin_id: currentUser.id
            });

            if (result.success) {
                showNotification('üîë ' + result.message + ': ' + result.key, 'success');
                document.getElementById('newKeyName').value = '';
            } else {
                showNotification('‚ùå ' + result.message, 'error');
            }
        }

        // Dashboard'u g√∂ster
        function showDashboard() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            
            if (currentUser.isAdmin) {
                document.getElementById('adminPanel').style.display = 'block';
            }
        }

        // Bot listesini g√ºncelle
        function updateBotList() {
            const container = document.getElementById('botListContainer');
            let html = '<h2 style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;"><i class="fas fa-list"></i> Bot Listesi</h2>';

            if (bots.length === 0) {
                html += `
                    <div class="bot-card" style="text-align: center; padding: 50px 20px;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">ü§ñ</div>
                        <h3 style="color: var(--dark); margin-bottom: 10px;">Hen√ºz bot eklenmemi≈ü</h3>
                        <p style="color: var(--text); opacity: 0.7;">ƒ∞lk botunuzu ekleyerek ba≈ülayƒ±n! üéØ</p>
                    </div>
                `;
            } else {
                bots.forEach(bot => {
                    html += `
                        <div class="bot-card">
                            <div class="bot-header">
                                <div class="bot-name">
                                    <i class="fas fa-robot"></i>
                                    ${bot.name}
                                </div>
                                <span class="bot-status ${bot.status === 'active' ? 'status-active' : 'status-inactive'}">
                                    ${bot.status === 'active' ? 'üü¢ Aktif' : 'üî¥ Pasif'}
                                </span>
                            </div>
                            <div class="bot-details">
                                <div class="bot-detail">
                                    <strong>üÜî ID:</strong> ${bot.id}
                                </div>
                                <div class="bot-detail">
                                    <strong>üìÖ Olu≈üturulma:</strong> ${new Date(bot.created_at).toLocaleString('tr-TR')}
                                </div>
                                <div class="bot-detail">
                                    <strong>üîê Token:</strong> ${bot.token.substring(0, 15)}...
                                </div>
                            </div>
                            <div class="bot-actions">
                                <button class="btn ${bot.status === 'active' ? 'btn-warning' : 'btn-success'}" 
                                        onclick="${bot.status === 'active' ? 'stopBot' : 'startBot'}(${bot.id})">
                                    <i class="fas ${bot.status === 'active' ? 'fa-pause' : 'fa-play'}"></i>
                                    ${bot.status === 'active' ? 'Durdur' : 'Ba≈ülat'}
                                </button>
                                <button class="btn btn-danger" onclick="deleteBot(${bot.id})">
                                    <i class="fas fa-trash"></i> Sil
                                </button>
                            </div>
                        </div>
                    `;
                });
            }

            container.innerHTML = html;
        }

        // ƒ∞statistikleri g√ºncelle
        function updateStats() {
            document.getElementById('totalBots').textContent = bots.length;
            document.getElementById('activeBots').textContent = bots.filter(b => b.status === 'active').length;
            document.getElementById('inactiveBots').textContent = bots.filter(b => b.status === 'inactive').length;
        }

        // √áalƒ±≈üma s√ºresi
        function updateUptime() {
            systemUptime++;
            const uptimeElement = document.getElementById('uptime');
            const hours = Math.floor(systemUptime / 3600);
            const minutes = Math.floor((systemUptime % 3600) / 60);
            const seconds = systemUptime % 60;
            
            if (hours > 0) {
                uptimeElement.textContent = `${hours}s ${minutes}d ${seconds}sn`;
            } else if (minutes > 0) {
                uptimeElement.textContent = `${minutes}d ${seconds}sn`;
            } else {
                uptimeElement.textContent = `${seconds}sn`;
            }
        }

        // Toplu i≈ülemler
        async function startAllBots() {
            for (const bot of bots) {
                if (bot.status === 'inactive') {
                    await startBot(bot.id);
                }
            }
            showNotification('üéØ T√ºm botlar ba≈ülatƒ±ldƒ±!', 'success');
        }

        async function stopAllBots() {
            for (const bot of bots) {
                if (bot.status === 'active') {
                    await stopBot(bot.id);
                }
            }
            showNotification('‚è∏Ô∏è T√ºm botlar durduruldu!', 'warning');
        }

        function refreshDashboard() {
            loadBots();
            showNotification('üîÑ Dashboard yenilendi!', 'success');
        }

        // Bildirim fonksiyonu
        function showNotification(message, type) {
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notif => notif.remove());

            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 
                                 type === 'error' ? 'exclamation-circle' : 
                                 'exclamation-triangle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideInRight 0.5s ease reverse';
                setTimeout(() => notification.remove(), 500);
            }, 5000);
        }

                // Sayfa y√ºklendiƒüinde
        document.addEventListener('DOMContentLoaded', function() {
            // √áalƒ±≈üma s√ºresi sayacƒ±nƒ± ba≈ülat
            setInterval(updateUptime, 1000);
            
            // Enter tu≈üu ile giri≈ü
            document.getElementById('accessKey').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    login();
                }
            });
            
            // Demo modu
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('demo') === 'true') {
                document.getElementById('accessKey').value = 'DJF27DJF';
                setTimeout(login, 1000);
            }
        });
    </script>
</body>
</html>