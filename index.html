<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Alım Satım Sitesi</title>
<style>
  body {
    background-color: #000;
    color: #0f0;
    font-family: Arial, sans-serif;
    margin: 0; padding: 0;
  }
  header, footer {
    background: #020;
    padding: 1rem;
    text-align: center;
  }
  nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 1rem;
  }
  nav .profile, nav .cart {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  nav button {
    background-color: #0f0;
    border: none;
    color: #000;
    padding: 0.5rem 1rem;
    cursor: pointer;
    border-radius: 4px;
  }
  .products {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(200px,1fr));
    gap: 1rem;
    padding: 1rem;
  }
  .product {
    background: #111;
    border: 1px solid #0f0;
    border-radius: 8px;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .product h3 {
    margin-top: 0;
  }
  .product button {
    margin-top: 1rem;
    background-color: #0f0;
    border: none;
    color: #000;
    padding: 0.5rem;
    cursor: pointer;
    border-radius: 4px;
  }
  #cartDetails {
    position: fixed;
    right: 1rem;
    top: 3rem;
    background: #020;
    border: 1px solid #0f0;
    padding: 1rem;
    max-width: 300px;
    max-height: 70vh;
    overflow-y: auto;
    display: none;
    z-index: 1000;
  }
  #cartDetails h4 {
    margin-top: 0;
  }
  #cartDetails ul {
    list-style: none;
    padding-left: 0;
  }
  #cartDetails ul li {
    margin-bottom: 0.5rem;
  }
  #orderForm {
    background: #020;
    color: #0f0;
    padding: 1rem;
    margin: 1rem;
    border-radius: 8px;
  }
  #orderForm input {
    display: block;
    margin-bottom: 1rem;
    width: 100%;
    padding: 0.5rem;
    background: #000;
    border: 1px solid #0f0;
    color: #0f0;
    border-radius: 4px;
  }
  #orderForm button {
    background-color: #0f0;
    border: none;
    color: #000;
    padding: 0.75rem;
    cursor: pointer;
    border-radius: 4px;
    width: 100%;
  }
  .profile-avatar {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #0f0;
    color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
  }
  .profile-name {
    color: #0f0;
  }
  /* Scroll animation */
  .scroll-animate {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  .scroll-animate.visible {
    opacity: 1;
    transform: translateY(0);
  }
  /* Dark mode toggle */
  .dark-mode {
    background-color: #000;
    color: #0f0;
  }
</style>
</head>
<body>
<header>
  <nav>
    <div class="profile">
      <div class="profile-avatar" id="profileAvatar">A</div>
      <div class="profile-name" id="profileName">Misafir</div>
    </div>
    <button id="darkModeToggle">Karanlık Mod Aç/Kapat</button>
    <div class="cart">
      <button id="cartToggle">Sepet (<span id="cartCount">0</span>)</button>
    </div>
  </nav>
</header>

<main>
  <section class="products" id="productList">
    <!-- Ürünler buraya JS ile eklenecek -->
  </section>

  <section id="cartDetails">
    <h4>Sepetiniz</h4>
    <ul id="cartItems"></ul>
    <p>Toplam: <span id="cartTotal">0</span> TL</p>
  </section>

  <section id="orderSection">
    <h3>Sipariş Formu</h3>
    <form id="orderForm" action="https://docs.google.com/forms/d/e/1FAIpQLSc8J.../formResponse" method="POST" target="_blank" onsubmit="return prepareOrderData()">
      <input type="hidden" name="entry.1234567890" id="orderDetails" />
      <input type="text" name="entry.0987654321" id="phone" placeholder="Telefon Numaranız" required />
      <input type="email" name="entry.1122334455" id="email" placeholder="E-posta Adresiniz" required />
      <input type="text" name="entry.6677889900" id="username" placeholder="Kullanıcı Adı" required />
      <button type="submit">Siparişi Gönder</button>
    </form>
  </section>

  <section id="aiChatSection" style="margin:1rem; padding:1rem; border:1px solid #0f0; border-radius:8px;">
    <h3>Yapay Zeka Destekli Canlı Sohbet</h3>
    <div id="chatOutput" style="height:200px; overflow-y:auto; background:#111; padding:10px; border-radius:8px; color:#0f0;"></div>
    <input type="text" id="chatInput" placeholder="Sorunuzu yazın..." style="width:100%; margin-top:10px; padding:0.5rem; background:#000; color:#0f0; border:1px solid #0f0; border-radius:4px;" />
    <button onclick="sendMessage()" style="margin-top:0.5rem; background:#0f0; color:#000; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;">Gönder</button>
  </section>
</main>

<footer>
  &copy; 2025 Alım Satım Sitesi
</footer>

<script>
// Ürün listesi örneği
const products = [
  {id:1, name:"Ürün 1", price:100},
  {id:2, name:"Ürün 2", price:150},
  {id:3, name:"Ürün 3", price:200},
  {id:4, name:"Ürün 4", price:250},
  {id:5, name:"Ürün 5", price:300},
  {id:6, name:"Ürün 6", price:350},
  {id:7, name:"Ürün 7", price:400},
  {id:8, name:"Ürün 8", price:450},
  {id:9, name:"Ürün 9", price:500},
];

let cart = [];

// Ürünleri sayfaya ekle
function displayProducts() {
  const productList = document.getElementById('productList');
  productList.innerHTML = '';
  products.forEach(product => {
    const div = document.createElement('div');
    div.classList.add('product', 'scroll-animate');
    div.innerHTML = `
      <h3>${product.name}</h3>
      <p>Fiyat: ${product.price} TL</p>
      <button onclick="addToCart(${product.id})">Sepete Ekle</button>
    `;
    productList.appendChild(div);
  });
  revealOnScroll();
}

// Scroll animasyonlarını aktif et
function revealOnScroll() {
  const elements = document.querySelectorAll('.scroll-animate');
  const windowHeight = window.innerHeight;
  elements.forEach(el => {
    const elementTop = el.getBoundingClientRect().top;
    if(elementTop < windowHeight - 50) {
      el.classList.add('visible');
    }
  });
}
window.addEventListener('scroll', revealOnScroll);

// Sepete ürün ekle
function addToCart(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  const itemInCart = cart.find(item => item.id === productId);
  if(itemInCart) {
    itemInCart.quantity++;
  } else {
    cart.push({...product, quantity: 1});
  }
  updateCartUI();
}

// Sepeti güncelle
function updateCartUI() {
  const cartCount = document.getElementById('cartCount');
  const cartItems = document.getElementById('cartItems');
  const cartTotal = document.getElementById('cartTotal');

  let totalQuantity = 0;
  let totalPrice = 0;
  cartItems.innerHTML = '';

  cart.forEach(item => {
    totalQuantity += item.quantity;
    totalPrice += item.price * item.quantity;
    const li = document.createElement('li');
    li.textContent = `${item.name} x${item.quantity} - ${item.price * item.quantity} TL`;
    cartItems.appendChild(li);
  });

  cartCount.textContent = totalQuantity;
  cartTotal.textContent = totalPrice;

  // Sipariş formundaki gizli alana güncel sipariş detaylarını yaz
  const orderDetailsInput = document.getElementById('orderDetails');
  orderDetailsInput.value = cart.map(i => `${i.name} x${i.quantity}`).join(', ');
}

// Sepet detaylarını göster/gizle
const cartToggleBtn = document.getElementById('cartToggle');
const cartDetails = document.getElementById('cartDetails');
cartToggleBtn.addEventListener('click', () => {
  if(cartDetails.style.display === 'block') {
    cartDetails.style.display = 'none';
  } else {
    cartDetails.style.display = 'block';
  }
});

// Karanlık mod toggle
const darkModeToggle = document.getElementById('darkModeToggle');
darkModeToggle.addEventListener('click', () => {
  document.body.classList.toggle('dark-mode');
});

// Kullanıcı profili (örnek basit şekilde)
const profileName = document.getElementById('profileName');
const profileAvatar = document.getElementById('profileAvatar');
let currentUser = {
  username: 'Misafir',
  avatarText: 'A'
};

function updateProfile() {
  profileName.textContent = currentUser.username;
  profileAvatar.textContent = currentUser.avatarText;
}
updateProfile();

// Sipariş formu gönderiminden önce kontrol ve uyarı
function prepareOrderData() {
  if(cart.length === 0) {
    alert('Sepetiniz boş! Lütfen önce ürün ekleyin.');
    return false;
  }
  // form gönderimi gerçekleşecek, popup engelleme olursa yeni sekme açılabilir.
  alert('Siparişiniz gönderiliyor, teşekkürler!');
  return true;
}

// --- Yapay Zeka Chatbot (basit örnek) ---

const chatOutput = document.getElementById('chatOutput');
const chatInput = document.getElementById('chatInput');

const aiResponses = {
  'merhaba': 'Merhaba! Size nasıl yardımcı olabilirim?',
  'nasılsın': 'İyiyim, teşekkür ederim! Siz nasılsınız?',
  'yardım': 'Elbette! Ürünler, sipariş ve diğer konularda sorularınızı sorabilirsiniz.',
  'fiyat': 'Ürün fiyatları sayfamızda listelenmektedir. Detaylı bilgi için ürün isimlerini kullanabilirsiniz.',
  'default': 'Üzgünüm, bunu anlayamadım. Lütfen tekrar deneyin.'
};

function sendMessage() {
  const userText = chatInput.value.trim();
  if(!userText) return;
  appendMessage('Sen', userText);
  chatInput.value = '';
  setTimeout(() => {
    const response = getAIResponse(userText.toLowerCase());
    appendMessage('Yapay Zeka', response);
  }, 800);
}

function appendMessage(sender, message) {
  const div = document.createElement('div');
  div.innerHTML = `<strong>${sender}:</strong> ${message}`;
  chatOutput.appendChild(div);
  chatOutput.scrollTop = chatOutput.scrollHeight;
}

function getAIResponse(input) {
  for (const key in aiResponses) {
    if (input.includes(key)) {
      return aiResponses[key];
    }
  }
  return aiResponses['default'];
}

// Sayfa yüklendiğinde ürünleri göster
window.onload = () => {
  displayProducts();
};
</script>

</body>
</html>