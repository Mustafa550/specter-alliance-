<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DearSiber FreeByte </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-md5/0.8.3/md5.min.js"></script>
    <style>
        .ascii-art {
            font-family: 'Courier New', Courier, monospace;
            white-space: pre;
            color: #10B981;
            background-color: #1F2937;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            animation: glow 1.5s ease-in-out infinite alternate;
        }
        .berkesanal-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            color: #10B981;
            text-shadow: 0 0 10px #10B981, 0 0 20px #10B981, 0 0 30px #10B981;
            animation: neon 1.5s ease-in-out infinite alternate;
        }
        .small-text {
            font-family: 'Roboto', sans-serif;
            font-size: 0.9rem;
            color: #D1D5DB;
        }
        body {
            background-color: #111827;
            color: #F9FAFB;
        }
        .output {
            font-family: 'Courier New', Courier, monospace;
            background-color: #1F2937;
            padding: 1rem;
            border-radius: 0.5rem;
            min-height: 200px;
            overflow-y: auto;
            border: 1px solid #10B981;
        }
        .btn:hover {
            transform: scale(1.05);
            transition: transform 0.2s ease-in-out;
            box-shadow: 0 0 15px #10B981;
        }
        .retry-btn:hover {
            transform: scale(1.05);
            transition: transform 0.2s ease-in-out;
            box-shadow: 0 0 15px #EF4444;
        }
        .limit-warning {
            animation: neon-red 1.5s ease-in-out infinite alternate;
        }
        .loading {
            display: none;
            text-align: center;
            color: #10B981;
        }
        .spinner {
            border: 2px solid #10B981;
            border-top: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes neon {
            from { text-shadow: 0 0 5px #10B981, 0 0 10px #10B981, 0 0 15px #10B981; }
            to { text-shadow: 0 0 10px #10B981, 0 0 20px #10B981, 0 0 30px #10B981; }
        }
        @keyframes neon-red {
            from { text-shadow: 0 0 5px #EF4444, 0 0 10px #EF4444; }
            to { text-shadow: 0 0 10px #EF4444, 0 0 20px #EF4444; }
        }
        @keyframes glow {
            from { box-shadow: 0 0 5px #10B981; }
            to { box-shadow: 0 0 15px #10B981; }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="max-w-md w-full space-y-6">
        <div class="ascii-art">
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£Ä‚£§‚£§‚£§‚£§‚£§‚£§‚£Ñ‚£Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä<br>
‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚°¥‚†ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°è‚¢ª‚£ü‚°≥‚†∂‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä<br>
‚†Ä‚†Ä‚£∞‚†ü‚†â‚†Ä‚£∏‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°á‚†Ä‚†∏‚£ß‚†Ä‚†â‚†ª‚£Ü‚†Ä‚†Ä<br>
‚†Ä‚£º‚†ø‚†∂‚†≤‚¢∂‚°ø‚†ø‚†ª‚†ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°∂‚†ñ‚†∂‚†ø‚°∂‚†∂‚†≤‚†ü‚£∑‚°Ä<br>
‚£®‚°è‚†Ä‚†Ä‚†Ä‚£∏‚°É‚†Ä‚†Ä‚†Ä‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°á‚†Ä‚†Ä‚†ò‚£ø‚†Ä‚†Ä‚†Ä‚¢ò‚£á<br>
‚£æ‚£Ñ‚£Ä‚£Ä‚£†‚£ø‚£Ö‚£Ä‚£Ä‚£§‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£á‚£Ä‚£Ä‚£§‚£ø‚£Ñ‚£Ä‚£Ä‚£§‚£ø<br>
‚£ª‚°Ä‚†Ä‚†Ä‚†Ä‚£ø‚†Ñ‚†Ä‚†Ä‚†Ä‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°Ü‚†Ä‚†Ä‚†Ä‚£ø‚†Ä‚†Ä‚†Ä‚¢Ä‚£ø<br>
‚†ò‚£∑‚†Ä‚†Ä‚†Ä‚¢º‚°Ü‚†Ä‚†Ä‚†Ä‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°á‚†Ä‚†Ä‚¢∞‚°ø‚†Ä‚†Ä‚†Ä‚£∏‚†É<br>
‚†Ä‚†ò‚¢ø‚°ø‚†ø‚†ü‚£ø‚†ø‚†ø‚†ü‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°ø‚†ø‚†ü‚£ø‚†ø‚†ø‚†ø‚£ø‚†ü‚†Ä<br>
‚†Ä‚†Ä‚†à‚†ª‚¢¶‚£Ä‚†ô‚£∑‚°Ä‚†Ä‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°á‚¢Ä‚£∏‚†è‚£Ä‚£¥‚†û‚†Å‚†Ä‚†Ä<br>
‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†ô‚†õ‚†ø‚°ø‚£¶‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£∑‚¢ø‚°ø‚†ü‚†õ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
        </div>
        <h1 class="ZAZA-title text-center">DEARSƒ∞BER</h1>
        <p class="small-text text-center">1 GB APP G√ºnl√ºk 50 FreeByte Tool</p>
        <div class="space-y-4">
            <div>
                <label for="msisdn" class="block small-text text-gray-300">Telefon Numarasƒ± (905xxxxxxxxx)</label>
                <input type="text" id="msisdn" class="mt-1 block w-full p-2 rounded-md bg-gray-700 border-gray-600 text-white focus:ring-green-500 focus:border-green-500" placeholder="905xxxxxxxxx">
            </div>
            <div>
                <label for="pin" class="block small-text text-gray-300">PIN</label>
                <input type="password" id="pin" class="mt-1 block w-full p-2 rounded-md bg-gray-700 border-gray-600 text-white focus:ring-green-500 focus:border-green-500" placeholder="PIN girin">
            </div>
            <button id="girisBtn" onclick="giris()" class="btn w-full py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700">Giri≈ü Yap</button>
            <button id="retryBtn" onclick="giris()" class="retry-btn w-full py-2 px-4 bg-red-600 text-white rounded-md hover:bg-red-700 hidden">Yarƒ±n Tekrar Dene</button>
            <div id="loading" class="loading">‚ö° ƒ∞≈ülem devam ediyor... <span class="spinner"></span></div>
        </div>
        <div id="output" class="output"></div>
        <p class="small-text text-center mt-4">Dev: <a href="https://t.me/berkeinternet" target="_blank" class="text-green-400 hover:text-green-300">@berkeinternet</a> | <a href="https://www.1gb.app/" target="_blank" class="text-blue-400 hover:text-blue-300">G√ºncel App: 1gb.app</a></p>
    </div>

    <script>
        // √áƒ±ktƒ± fonksiyonu
        function log(message, color = 'text-gray-300', isLimit = false) {
            try {
                console.log('Log:', message); // Konsola yaz
                const output = document.getElementById('output');
                if (!output) {
                    console.error('Output div bulunamadƒ±!');
                    return;
                }
                const p = document.createElement('p');
                p.className = `${color} small-text ${isLimit ? 'limit-warning' : ''}`;
                p.textContent = message;
                output.appendChild(p);
                output.scrollTop = output.scrollHeight;
            } catch (e) {
                console.error('Log hatasƒ±:', e);
            }
        }

        // Loading g√∂ster/gizle
        function toggleLoading(show) {
            try {
                document.getElementById('loading').style.display = show ? 'block' : 'none';
                document.getElementById('girisBtn').disabled = show;
                const retryBtn = document.getElementById('retryBtn');
                if (retryBtn) retryBtn.classList.toggle('hidden', show);
            } catch (e) {
                console.error('Loading toggle hatasƒ±:', e);
                log('UI hatasƒ±: Loading durumu g√ºncellenemedi üòï', 'text-red-400');
            }
        }

        // MD5 Hash √ºretimi
        function hashuret(tid) {
            try {
                const secret = "6c2eefca87ae2259797c9f46f8a3c577";
                const msg = tid + secret;
                return md5(msg); // js-md5 ile hash
            } catch (e) {
                console.error('Hashuret hatasƒ±:', e);
                log('Hash √ºretme hatasƒ± üòï', 'text-red-400');
                return null;
            }
        }

        // Response'ƒ± g√ºvenli oku
        async function safeReadResponse(response) {
            try {
                const text = await response.clone().text();
                try {
                    const json = await response.json();
                    return { json, text, status: response.status };
                } catch {
                    return { json: null, text, status: response.status };
                }
            } catch (e) {
                console.error('Response okuma hatasƒ±:', e);
                return { json: null, text: 'Response okunamadƒ±', status: response.status };
            }
        }

        // √ñd√ºl alma fonksiyonu
        async function odul(token) {
            const url = "https://3uptzlakwi.execute-api.eu-west-1.amazonaws.com/api/user/check-in";
            const headers = {
                'User-Agent': "okhttp/4.12.0",
                'Accept-Encoding': "gzip",
                'Content-Type': "application/json",
                'Authorization': `Bearer ${token}`
            };
            try {
                log('√ñd√ºl alƒ±nƒ±yor... ‚ö°', 'text-yellow-400');
                const response = await fetch(url, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify({ etkAccepted: false })
                });
                const { json: data, text, status } = await safeReadResponse(response);
                if (response.ok) {
                    log("Giri≈ü √∂d√ºl√º alƒ±ndƒ± üöÄ", "text-green-400");
                } else {
                    log(`√ñd√ºl alƒ±namadƒ± üòï (Status: ${status}) - Detay: ${data?.message || text || 'Puan y√ºkleme sorunu (API eski?)'}`, "text-red-400");
                    console.error('√ñd√ºl alma hatasƒ±:', data || text);
                }
            } catch (e) {
                log("Hata: " + e.message + " (API eri≈üilemez ‚õî - 1gb.app'i indirip manuel dene!)", "text-red-400");
                console.error('√ñd√ºl alma hatasƒ±:', e);
            }
        }

        // Reklam i≈ülemi fonksiyonu
        async function gaci(token) {
            const startUrl = "https://3uptzlakwi.execute-api.eu-west-1.amazonaws.com/api/admob/start";
            const finishUrl = "https://3uptzlakwi.execute-api.eu-west-1.amazonaws.com/api/admob/finish";
            const headers = {
                'User-Agent': "okhttp/4.12.0",
                'Accept-Encoding': "gzip",
                'Content-Type': "application/json",
                'Authorization': `Bearer ${token}`
            };
            try {
                log('Reklam i≈ülemi ba≈ülƒ±yor... ‚ö°', 'text-yellow-400');
                const startResponse = await fetch(startUrl, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify({})
                });
                const { json: startData, text: startText, status: startStatus } = await safeReadResponse(startResponse);
                if (startResponse.ok && startData?.transactionId) {
                    const tid = startData.transactionId;
                    log(`[+] ${tid}`, "text-yellow-400");
                    const hash = hashuret(tid);
                    if (!hash) return; // Hash hatasƒ± varsa dur
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    const finishResponse = await fetch(finishUrl, {
                        method: 'POST',
                        headers: headers,
                        body: JSON.stringify({ transactionId: tid, hash: hash })
                    });
                    const { json: finishData, text: finishText, status: finishStatus } = await safeReadResponse(finishResponse);
                    if (finishResponse.ok) {
                        log("Tamamlandƒ± üéâ", "text-green-400");
                    } else {
                        log(`Hata üòï (Status: ${finishStatus}) - Detay: ${finishData?.message || finishText || 'Limit/Puan sorunu?'}`, "text-red-400");
                        console.error('Finish hatasƒ±:', finishData || finishText);
                    }
                } else {
                    const limitMessage = startData?.code === "daily_limit_reached" 
                        ? "G√ºnl√ºk FreeByte limitin doldu! Yarƒ±n yine gel, @DearSiber'le u√ß! üòé"
                        : `Limit doldu ‚õî (Status: ${startStatus}) - Detay: ${startData?.message || startText || 'API yanƒ±t vermiyor'}`;
                    log(limitMessage, "text-red-400", startData?.code === "daily_limit_reached");
                    console.error('Start hatasƒ±:', startData || startText);
                    if (startData?.code === "daily_limit_reached") {
                        document.getElementById('retryBtn').classList.remove('hidden');
                    }
                }
            } catch (e) {
                log("Hata: " + e.message + " (API eri≈üilemez ‚õî - 1gb.app'i indirip manuel dene!)", "text-red-400");
                console.error('Reklam i≈ülemi hatasƒ±:', e);
            }
        }

        // Giri≈ü fonksiyonu
        async function giris() {
            try {
                log('Ba≈ülatƒ±lƒ±yor... üöÄ', 'text-yellow-400');
                const msisdn = document.getElementById('msisdn').value.trim();
                const pin = document.getElementById('pin').value.trim();
                if (!msisdn.startsWith("905") || msisdn.length !== 12) {
                    log("Numara hatalƒ± üì± (905 ile ba≈üla, tam 12 hane)", "text-red-400");
                    console.error('Hatalƒ± numara:', msisdn);
                    return;
                }
                if (!pin || !/^\d+$/.test(pin)) {
                    log("PIN hatalƒ± üîê (Sadece sayƒ±, bo≈ü olamaz)", "text-red-400");
                    console.error('Hatalƒ± PIN:', pin);
                    return;
                }
                toggleLoading(true);
                log("Giri≈ü deneniyor... ‚ö°", "text-yellow-400");
                const url = "https://3uptzlakwi.execute-api.eu-west-1.amazonaws.com/api/auth/pin/verify";
                const headers = {
                    'User-Agent': "okhttp/4.12.0",
                    'Accept-Encoding': "gzip",
                    'Content-Type': "application/json"
                };
                const response = await fetch(url, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify({ msisdn: msisdn, osType: "ANDROID", pin: pin })
                });
                const { json: data, text, status } = await safeReadResponse(response);
                if (response.ok && data?.token) {
                    log("Giri≈ü ba≈üarƒ±lƒ± ‚úÖ", "text-green-400");
                    const token = data.token;
                    await odul(token);
                    for (let i = 0; i < 4; i++) {
                        log(`${i + 1}. istek ‚ö°`, "text-yellow-400");
                        await gaci(token);
                    }
                } else if (status === 400) {
                    log(`Pin/Numara hatasƒ± üîê (Status: 400) - Detay: ${data?.message || text || 'Format sorunu? √ñnceki haftasƒ± puanƒ± y√ºklenmiyor olabilir!' }`, "text-red-400");
                    console.error('Giri≈ü hatasƒ± detayƒ±:', data || text);
                } else {
                    log(`Hata: ${data?.message || 'Bilinmeyen hata (API kapandƒ± mƒ±?)'} (Status: ${status}) - Detay: ${text || 'Eri≈üim reddedildi'}`, "text-red-400");
                    console.error('Giri≈ü hatasƒ±:', data || text);
                }
            } catch (e) {
                log("Hata: " + e.message + " (API eri≈üilemez ‚õî - Endpoint eski, @DearSiber'e yeni tool sor!)", "text-red-400");
                console.error('Giri≈ü hatasƒ±:', e);
            } finally {
                toggleLoading(false);
            }
        }
    </script>
</body>
</html>